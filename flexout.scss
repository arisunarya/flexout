$columns-item: 12 !default;
$divided-item: 16 !default;

@mixin flexout($media: null) {
	@if $media {
		$media: "-#{$media}";
	} @else {
		[flow] {
			display: flex;
		}
	}

	// controls flex-direction & flex-wrap
	[flow#{$media}="row"] {
		flex-direction: row;
	}

	[flow#{$media}="row nowrap"] {
		flex-flow: row nowrap;
	}

	[flow#{$media}="row wrap"] {
		flex-flow: row wrap;
	}

	[flow#{$media}="row wrap-reverse"] {
		flex-flow: row wrap-reverse;
	}
	
	[flow#{$media}="row-reverse"] {
		flex-direction: row-reverse;
	}

	[flow#{$media}="row-reverse nowrap"] {
		flex-flow: row-reverse nowrap;
	}

	[flow#{$media}="row-reverse wrap"] {
		flex-flow: row-reverse wrap;
	}

	[flow#{$media}="row-reverse wrap-reverse"] {
		flex-flow: row-reverse wrap-reverse;
	}

	[flow#{$media}="column"] {
		flex-direction: column;
	}

	[flow#{$media}="column nowrap"] {
		flex-flow: column nowrap;
	}

	[flow#{$media}="column wrap"] {
		flex-flow: column wrap;
	}

	[flow#{$media}="column wrap-reverse"] {
		flex-flow: column wrap-reverse;
	}

	[flow#{$media}="column-reverse"] {
		flex-direction: column-reverse;
	}

	[flow#{$media}="column-reverse nowrap"] {
		flex-flow: column-reverse nowrap;
	}

	[flow#{$media}="column-reverse wrap"] {
		flex-flow: column-reverse wrap;
	}

	[flow#{$media}="column-reverse wrap-reverse"] {
		flex-flow: column-reverse wrap-reverse;
	}
	
	// controls align-content & justify-content
	[align#{$media}="start start"],
	[align#{$media}="start center"],
	[align#{$media}="start end"],
	[align#{$media}="start beetwen"],
	[align#{$media}="start around"] {
		align-content: flex-start;
	}

	[align#{$media}="center start"],
	[align#{$media}="center center"],
	[align#{$media}="center end"],
	[align#{$media}="center beetwen"],
	[align#{$media}="center around"] {
		align-content: center;
	}

	[align#{$media}="end start"],
	[align#{$media}="end center"],
	[align#{$media}="end end"],
	[align#{$media}="end beetwen"],
	[align#{$media}="end around"] {
		align-content: flex-end;
	}

	[align#{$media}="stretch start"],
	[align#{$media}="stretch center"],
	[align#{$media}="stretch end"],
	[align#{$media}="stretch beetwen"],
	[align#{$media}="stretch around"] {
		align-content: stretch;
	}

	[align#{$media}="around start"],
	[align#{$media}="around center"],
	[align#{$media}="around end"],
	[align#{$media}="around beetwen"],
	[align#{$media}="around around"] {
		align-content: space-around;
	}

	[align#{$media}="between start"],
	[align#{$media}="between center"],
	[align#{$media}="between end"],
	[align#{$media}="between beetwen"],
	[align#{$media}="between around"] {
		align-content: space-between;
	}

	[align#{$media}="start start"],
	[align#{$media}="center start"],
	[align#{$media}="end start"],
	[align#{$media}="around start"],
	[align#{$media}="between start"] {
		justify-content: flex-start;
	}

	[align#{$media}="start center"],
	[align#{$media}="center center"],
	[align#{$media}="end center"],
	[align#{$media}="around center"],
	[align#{$media}="between center"] {
		justify-content: center;
	}

	[align#{$media}="start end"],
	[align#{$media}="center end"],
	[align#{$media}="end end"],
	[align#{$media}="around end"],
	[align#{$media}="between end"] {
		justify-content: flex-end;
	}

	[align#{$media}="start around"],
	[align#{$media}="center around"],
	[align#{$media}="end around"],
	[align#{$media}="around around"],
	[align#{$media}="between around"] {
		justify-content: space-around;
	}

	[align#{$media}="start between"],
	[align#{$media}="center between"],
	[align#{$media}="end between"],
	[align#{$media}="around between"],
	[align#{$media}="between between"] {
		justify-content: space-between;
	}

	// controls align-items
	[align-items#{$media}="baseline"] {
		align-items: baseline;
	}

	[align-items#{$media}="start"] {
		align-items: flex-start;
	}

	[align-items#{$media}="center"] {
		align-items: center;
	}

	[align-items#{$media}="end"] {
		align-items: flex-end;
	}

	[align-items#{$media}="stretch"] {
		align-items: stretch;
	}

	// controls align-self
	[align-self#{$media}="baseline"] {
		align-self: baseline;
	}

	[align-self#{$media}="start"] {
		align-self: flex-start;
	}

	[align-self#{$media}="center"] {
		align-self: center;
	}

	[align-self#{$media}="end"] {
		align-self: flex-end;
	}

	[align-self#{$media}="stretch"] {
		align-self: stretch;
	}

	// flex items
	[flex#{$media}] {
		flex: 1;
	}

	[flex#{$media}="auto"] {
		flex: 1 1 auto;
	}

	[flex#{$media}="nogrow"] {
		flex: 0 1 auto;
	}

	[flex#{$media}="noshrink"] {
		flex: 1 0 auto;
	}

	[flex#{$media}="0"] {
		flex: 0 0 auto;
	}

	// fix oversize
	[flow#{$media}^="row"] > [flex] {
		max-height: 100%;
	}

	[flow#{$media}^="column"] > [flex] {
		max-width: 100%;
	}

	// column
	@for $i from 1 through $columns-item {
		[flex#{$media}="#{$i}"] {
			flex: 0 0 (100% / $columns-item * $i);
		}
		
		[flow^="row"] > [flex#{$media}="#{$i}"] {
			max-width: (100% / $columns-item * $i);
		}
		
		[flow^="column"] > [flex#{$media}="#{$i}"] {
			max-height: (100% / $columns-item * $i);
		}
	}

	// divided
	@for $i from 1 through $divided-item {
		[divided#{$media}="#{$i}"] > * {
			flex: 0 0 (100% / $i);
		}

		[divided#{$media}="#{$i}"][flow^="row"] > * {
			max-width: (100% / $i);
		}

		[divided#{$media}="#{$i}"][flow^="column"] > * {
			max-height: (100% / $i);
		}
	}
}

@include flexout;
